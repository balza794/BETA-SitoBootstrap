name: Deploy GitHub pages

permissions:
    contents: read
    pages: write
    id-token: write

jobs:
    build_and_deploy:
        runs-on: ubuntu-latest

    steps:
        - name: Check repository
          uses: actions/checkout@v4

        - name: Set up nodejs
          uses: actions/setup-node@v3
          with:
            node-version: '22'
        
        - name: Install dependecies
          uses: npm ci

        - name: Build static site
          uses: npm run build
          
        - name: Configure pages
          uses: actions/configure-pages@v5
          with:
            enablement: 'true'
        
        - name: Upload pages
          uses: actions/upload-pages-artifact@v1
          with:
            path: './build'

        - name: Deploy to GitHub Pages
          uses: actions/deploy-pages@v1